<template>
  <view class="flow-page">
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <view class="nav-header">
      <view class="nav-back" @click="goBack">
        <text class="back-icon">â†</text>
      </view>
      <text class="nav-title">å‘è´§æµç¨‹å›¾ç¤º</text>
      <view class="nav-placeholder"></view>
    </view>

    <!-- ä¸»è¦å†…å®¹ -->
    <scroll-view class="content-scroll" scroll-y>
      <!-- æ¬¢è¿å¡ç‰‡ -->
      <view class="welcome-card">
        <view class="welcome-icon">ğŸ“‹</view>
        <text class="welcome-title">è¶…æ¸…æ™°æµç¨‹å›¾æ¥å•¦ï¼</text>
        <text class="welcome-desc">å§å¦¹ä»¬ï¼Œä¸€å›¾çœ‹æ‡‚æ•´ä¸ªå‘è´§æµç¨‹ï½</text>
      </view>

      <!-- æµç¨‹å›¾ -->
      <view class="flow-chart">
        <view class="chart-header">
          <text class="chart-title">ğŸš€ å®Œæ•´å‘è´§æµç¨‹</text>
        </view>
        
        <view class="flow-container">
          <!-- ç”¨æˆ·æ“ä½œåŒºåŸŸ -->
          <view class="flow-section user-section">
            <view class="section-header">
              <text class="section-title">ç”¨æˆ·æ“ä½œ</text>
            </view>
            
            <view class="flow-steps">
              <view class="flow-step">
                <view class="step-box user-box">
                  <text class="step-text">åŒ…è£¹é¢„æŠ¥</text>
                </view>
                <view class="step-arrow down"></view>
              </view>
              
              <view class="flow-step">
                <view class="step-box user-box">
                  <text class="step-text">æäº¤å‘è¿</text>
                </view>
                <view class="step-arrow down"></view>
              </view>
              
              <view class="flow-step">
                <view class="step-box user-box">
                  <text class="step-text">æ”¯ä»˜è¿è´¹</text>
                </view>
                <view class="step-arrow down"></view>
              </view>
              
              <view class="flow-step last">
                <view class="step-box user-box">
                  <text class="step-text">æ”¶è´§</text>
                </view>
              </view>
            </view>
          </view>

          <!-- è¿æ¥çº¿ -->
          <view class="connection-area">
            <view class="connection-line line-1"></view>
            <view class="connection-label label-1">
              <text class="label-text">å…¬ä¼—å·ä¿¡æ¯æ¨é€</text>
            </view>
            
            <view class="connection-line line-2"></view>
            <view class="connection-label label-2">
              <text class="label-text">å…¬ä¼—å·ä¿¡æ¯æ¨é€</text>
            </view>
          </view>

          <!-- ä»“åº“æ“ä½œåŒºåŸŸ -->
          <view class="flow-section warehouse-section">
            <view class="section-header">
              <text class="section-title">ä»“åº“æ“ä½œ</text>
            </view>
            
            <view class="flow-steps">
              <view class="flow-step">
                <view class="step-box warehouse-box">
                  <text class="step-text">æ”¶è´§æ£€æŸ¥</text>
                </view>
                <view class="step-arrow down"></view>
              </view>
              
              <view class="flow-step">
                <view class="step-box warehouse-box">
                  <text class="step-text">æ‰“åŒ…</text>
                </view>
                <view class="step-arrow down"></view>
              </view>
              
              <view class="flow-step last">
                <view class="step-box warehouse-box">
                  <text class="step-text">å‡ºåº“å‘è¿</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- æµç¨‹è¯¦è§£ -->
      <view class="flow-details">
        <view class="details-header">
          <text class="details-title">ğŸ“ æµç¨‹è¯¦è§£</text>
        </view>
        
        <view class="detail-cards">
          <view class="detail-card user-card">
            <view class="card-header">
              <text class="card-emoji">ğŸ‘¤</text>
              <text class="card-title">ç”¨æˆ·æ“ä½œ</text>
            </view>
            <view class="card-content">
              <view class="detail-item">
                <text class="detail-number">1ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">åŒ…è£¹é¢„æŠ¥</text> - ç½‘è´­åç«‹å³é¢„æŠ¥åŒ…è£¹ä¿¡æ¯</text>
              </view>
              <view class="detail-item">
                <text class="detail-number">2ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">æäº¤å‘è¿</text> - åŒ…è£¹åˆ°åº“åç”³è¯·å‘è¿åˆ°éŸ©å›½</text>
              </view>
              <view class="detail-item">
                <text class="detail-number">3ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">æ”¯ä»˜è¿è´¹</text> - ç¡®è®¤è¿è´¹å¹¶å®Œæˆæ”¯ä»˜</text>
              </view>
              <view class="detail-item">
                <text class="detail-number">4ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">æ”¶è´§</text> - åç­‰åŒ…è£¹é€åˆ°éŸ©å›½åœ°å€</text>
              </view>
            </view>
          </view>

          <view class="detail-card warehouse-card">
            <view class="card-header">
              <text class="card-emoji">ğŸ¢</text>
              <text class="card-title">ä»“åº“æ“ä½œ</text>
            </view>
            <view class="card-content">
              <view class="detail-item">
                <text class="detail-number">1ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">æ”¶è´§æ£€æŸ¥</text> - ä»“åº“æ”¶è´§å¹¶æ‹ç…§éªŒè´§</text>
              </view>
              <view class="detail-item">
                <text class="detail-number">2ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">æ‰“åŒ…</text> - ä¸“ä¸šæ‰“åŒ…ï¼Œç¡®ä¿è¿è¾“å®‰å…¨</text>
              </view>
              <view class="detail-item">
                <text class="detail-number">3ï¸âƒ£</text>
                <text class="detail-text"><text class="highlight">å‡ºåº“å‘è¿</text> - å‘å¾€éŸ©å›½ï¼Œå…¨ç¨‹å¯è¿½è¸ª</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- æ¸©é¦¨æç¤º -->
      <view class="tips-section">
        <view class="tips-header">
          <text class="tips-title">ğŸ’¡ æ¸©é¦¨æç¤º</text>
        </view>
        <view class="tips-content">
          <view class="tip-item">
            <text class="tip-icon">ğŸ””</text>
            <text class="tip-text">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€ä¸­éŸ©è·¨å¢ƒé‚®ã€‘ï¼ŒåŠæ—¶æ¥æ”¶æµç¨‹æ¨é€</text>
          </view>
          <view class="tip-item">
            <text class="tip-icon">â°</text>
            <text class="tip-text">åŒ…è£¹é¢„æŠ¥è¶Šæ—©è¶Šå¥½ï¼Œæœ‰åŠ©äºä»“åº“æå‰å‡†å¤‡</text>
          </view>
          <view class="tip-item">
            <text class="tip-icon">ğŸ“¦</text>
            <text class="tip-text">æ¯ä¸ªæ­¥éª¤éƒ½æœ‰çŠ¶æ€æ›´æ–°ï¼Œéšæ—¶æŒæ¡åŒ…è£¹åŠ¨æ€</text>
          </view>
        </view>
      </view>

      <!-- åº•éƒ¨å®‰å…¨è·ç¦» -->
      <view class="bottom-safe"></view>
    </scroll-view>
  </view>
</template>

<script setup lang="ts">
const goBack = () => {
  uni.navigateBack()
}
</script>

<style scoped>
/* é¡µé¢å®¹å™¨ */
.flow-page {
  min-height: 100vh;
  width: 100vw;
  max-width: 100vw;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  overflow-x: hidden;
  box-sizing: border-box;
}

/* å¤´éƒ¨å¯¼èˆª */
.nav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 60rpx 30rpx 30rpx;
  position: sticky;
  top: 0;
  z-index: 100;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20rpx);
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.nav-back {
  width: 60rpx;
  height: 60rpx;
  border-radius: 20rpx;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}

.back-icon {
  font-size: 32rpx;
  color: white;
  font-weight: bold;
}

.nav-title {
  font-size: 36rpx;
  font-weight: 600;
  color: white;
}

.nav-placeholder {
  width: 60rpx;
}

/* å†…å®¹æ»šåŠ¨åŒº */
.content-scroll {
  height: calc(100vh - 150rpx);
  padding: 0 30rpx;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* æ¬¢è¿å¡ç‰‡ */
.welcome-card {
  background: white;
  border-radius: 32rpx;
  padding: 50rpx;
  text-align: center;
  margin-bottom: 40rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
}

.welcome-icon {
  font-size: 80rpx;
  margin-bottom: 20rpx;
}

.welcome-title {
  font-size: 32rpx;
  font-weight: 700;
  color: #2c3e50;
  display: block;
  margin-bottom: 12rpx;
}

.welcome-desc {
  font-size: 26rpx;
  color: #7f8c8d;
  display: block;
}

/* æµç¨‹å›¾ */
.flow-chart {
  background: white;
  border-radius: 32rpx;
  padding: 40rpx;
  margin-bottom: 40rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
}

.chart-header {
  text-align: center;
  margin-bottom: 40rpx;
}

.chart-title {
  font-size: 28rpx;
  font-weight: 600;
  color: #2c3e50;
}

.flow-container {
  display: flex;
  position: relative;
}

.flow-section {
  flex: 1;
  padding: 20rpx;
}

.user-section {
  background: rgba(76, 217, 100, 0.1);
  border-radius: 20rpx;
  margin-right: 10rpx;
}

.warehouse-section {
  background: rgba(0, 122, 255, 0.1);
  border-radius: 20rpx;
  margin-left: 10rpx;
}

.section-header {
  text-align: center;
  margin-bottom: 30rpx;
}

.section-title {
  font-size: 24rpx;
  font-weight: 600;
  color: #2c3e50;
}

.flow-steps {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.flow-step {
  margin-bottom: 30rpx;
}

.flow-step.last {
  margin-bottom: 0;
}

.step-box {
  padding: 20rpx 30rpx;
  border-radius: 16rpx;
  min-width: 120rpx;
  text-align: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
}

.user-box {
  background: white;
  border: 2rpx solid #4cd964;
}

.warehouse-box {
  background: white;
  border: 2rpx solid #007aff;
}

.step-text {
  font-size: 22rpx;
  font-weight: 500;
  color: #2c3e50;
}

.step-arrow {
  width: 0;
  height: 0;
  margin: 10rpx auto;
}

.step-arrow.down {
  border-left: 12rpx solid transparent;
  border-right: 12rpx solid transparent;
  border-top: 20rpx solid #95a5a6;
}

/* è¿æ¥åŒºåŸŸ */
.connection-area {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translateX(-50%);
  width: 60rpx;
  height: 100%;
  z-index: 1;
}

.connection-line {
  height: 2rpx;
  background: #bdc3c7;
  position: absolute;
  width: 100rpx;
  left: -20rpx;
}

.line-1 {
  top: 20%;
}

.line-2 {
  top: 60%;
}

.connection-label {
  position: absolute;
  background: white;
  padding: 8rpx 12rpx;
  border-radius: 12rpx;
  border: 1rpx solid #e9ecef;
  left: -80rpx;
  width: 160rpx;
  text-align: center;
}

.label-1 {
  top: 15%;
}

.label-2 {
  top: 55%;
}

.label-text {
  font-size: 18rpx;
  color: #6c757d;
}

/* æµç¨‹è¯¦è§£ */
.flow-details {
  margin-bottom: 40rpx;
}

.details-header {
  text-align: center;
  margin-bottom: 30rpx;
}

.details-title {
  font-size: 28rpx;
  font-weight: 600;
  color: white;
}

.detail-cards {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.detail-card {
  background: white;
  border-radius: 24rpx;
  padding: 32rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
}

.user-card {
  border-left: 6rpx solid #4cd964;
}

.warehouse-card {
  border-left: 6rpx solid #007aff;
}

.card-header {
  display: flex;
  align-items: center;
  margin-bottom: 24rpx;
}

.card-emoji {
  font-size: 32rpx;
  margin-right: 16rpx;
}

.card-title {
  font-size: 26rpx;
  font-weight: 600;
  color: #2c3e50;
}

.detail-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 16rpx;
}

.detail-number {
  font-size: 20rpx;
  margin-right: 12rpx;
  margin-top: 2rpx;
}

.detail-text {
  font-size: 24rpx;
  color: #34495e;
  line-height: 1.5;
  flex: 1;
}

.highlight {
  font-weight: 600;
  color: #667eea;
}

/* æ¸©é¦¨æç¤º */
.tips-section {
  background: white;
  border-radius: 24rpx;
  padding: 32rpx;
  margin-bottom: 40rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
}

.tips-header {
  text-align: center;
  margin-bottom: 24rpx;
}

.tips-title {
  font-size: 26rpx;
  font-weight: 600;
  color: #2c3e50;
}

.tip-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 16rpx;
  padding: 16rpx;
  background: rgba(255, 193, 7, 0.1);
  border-radius: 12rpx;
  border-left: 4rpx solid #ffc107;
}

.tip-icon {
  font-size: 24rpx;
  margin-right: 12rpx;
  margin-top: 2rpx;
}

.tip-text {
  font-size: 22rpx;
  color: #795548;
  line-height: 1.4;
  flex: 1;
}

.bottom-safe {
  height: 60rpx;
}

/* å“åº”å¼ */
@media (max-width: 400px) {
  .flow-container {
    flex-direction: column;
  }
  
  .flow-section {
    margin: 0 0 20rpx 0;
  }
  
  .connection-area {
    display: none;
  }
}
</style>
